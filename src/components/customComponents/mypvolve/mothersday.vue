<template>
    
    <div>
        <div class="row gt-sm" style="background: url(https://vault.platformpurple.com/static/clients/mypvolve/PLV032-18-Mothers-Day_landingPageBanner.png); background-size: cover; background-position: 100% 0%;">
            <div class="row well">
                <div class="col-md-6 col-lg-5 xl" style="padding: 5rem 2rem;">
                    <h6 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">THIS WEEK ONLY! #MAMAPEACH</h6>
                    <h1 style="margin-top: 1rem;">GIVE HER PEACH</h1>
                    <h1 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">A PERK FOR MOTHER'S DAY</h1>
                    <h4 style="margin-top: 1rem; text-transform: none;">Purchase 3 months of streaming for MOM & get a pair of P.volve Gliders FREE!*</h4>
                </div>               
                <div class="col-md-6 col-lg-5 lg" style="padding: 4rem 2rem;">
                    <h6 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">THIS WEEK ONLY! #MAMAPEACH</h6>
                    <h1 style="margin-top: 1rem;">GIVE HER PEACH</h1>
                    <h1 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">A PERK FOR MOTHER'S DAY</h1>
                    <h4 style="margin-top: 1rem; text-transform: none;">Purchase 3 months of streaming for MOM & get a pair of P.volve Gliders FREE!*</h4>
                </div>              
                <div class="col-md-6 col-lg-5 lt-lg" style="padding: 2rem 1rem;">
                    <h6 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">THIS WEEK ONLY! #MAMAPEACH</h6>
                    <h1 style="margin-top: 1rem;">GIVE HER PEACH</h1>
                    <h1 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">A PERK FOR MOTHER'S DAY</h1>
                    <h4 style="margin-top: 1rem; text-transform: none;">Purchase 3 months of streaming for MOM & get a pair of P.volve Gliders FREE!*</h4>
                </div>   
                
                <div class="col-md-6 col-lg-7" align="right">
                    <!--<img src="https://vault.platformpurple.com/static/clients/mypvolve/Mothers-Day_landingPageBanner.jpg" style="max-height: 500px; max-width: 100%;" />-->
                </div>
            </div>
        </div>
        
        <div class="row lt-md">
            <div class="col-12" style="padding: 2rem 1rem;" align="center">
                <h6 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">THIS WEEK ONLY! #MAMAPEACH</h6>
                <h1 style="margin-top: 1rem;">GIVE HER PEACH</h1>
                <h1 class="thickHeader" :style="'color: ' + pvolveSalmon + ';'">A PERK FOR MOTHER'S DAY</h1>
                <h6 style="margin-top: 1rem; text-transform: none;">Purchase 3 months of streaming for MOM & get a pair of P.volve Gliders FREE!*</h6>
            </div>            
            <div class="col-12" align="right">
                <img src="https://vault.platformpurple.com/static/clients/mypvolve/Mothers-Day_landingPageBanner.jpg" style="max-height: 500px; max-width: 100%;" />
            </div>
        </div>

        <div class="row" :style="'max-width: 1200px; margin: 0 auto;' + (windowWidth > 767 ? 'padding: 1rem;' : '')"> <!--under header -->
        
            <div class="col-sm-12 col-md-6" style="padding: 1rem;">
                
                <div class="row">
                    <div class="col-xs-12 col-sm-5">
                        <img src="https://vault.platformpurple.com/static/clients/mypvolve/sliders_value.png" style="width: 100%; max-width: 250px; margin: 0 auto; display: block;" />
                    </div>
                    <div class="col-xs-12 xs">
                        <h6 style="color: #444; font-size: 1.2rem; text-transform: none; text-decoration: bold;">Don’t miss out on this Mother’s Day opportunity! Gift 3 months of streaming for mom and get a pair of P.volve Gliders FREE!*</h6>
                    </div>                    
                    <div class="col-sm-7 gt-xs" style="padding: 1rem;">
                        <h6 style="color: #444; font-size: 1.2rem; text-transform: none; text-decoration: bold;">Don’t miss out on this Mother’s Day opportunity! Gift 3 months of streaming for mom and get a pair of P.volve Gliders FREE!*</h6>
                    </div>
                </div>
                
                <div class="monty" style="color: #777; line-height: 2rem; margin-top: 1rem;">
                    <p style="font-size: 1rem;">Give the mother in your life the same workouts trusted by Victoria’s Secret™ models—INSTANTLY ACCESS all of P's workouts for a lifted booty, defined inner/outer thighs and whole body lengthening and tone.</p>
                    <p><q-icon name="fa-caret-right" :style="'color: ' + pvolveSalmon + '; font-size: 2rem; margin-right: .5rem;'" />Unlimited access to all streaming workouts</p>
                    <p><q-icon name="fa-caret-right" :style="'color: ' + pvolveSalmon + '; font-size: 2rem; margin-right: .5rem;'" />Stream on any device</p>
                    <p><q-icon name="fa-caret-right" :style="'color: ' + pvolveSalmon + '; font-size: 2rem; margin-right: .5rem;'" />New weekly workouts</p>
                    <p><q-icon name="fa-caret-right" :style="'color: ' + pvolveSalmon + '; font-size: 2rem; margin-right: .5rem;'" />The ability to set up workout goals and track your progress</p>
                    <p><q-icon name="fa-caret-right" :style="'color: ' + pvolveSalmon + '; font-size: 2rem; margin-right: .5rem;'" />Weekly progress reports</p>
                    <p><q-icon name="fa-caret-right" :style="'color: ' + pvolveSalmon + '; font-size: 2rem; margin-right: .5rem;'" />Custom workout reminders</p>
                    <p style="font-size: .9rem;">*Free shipping only in the contiguous USA. All International orders will need to pay for shipping, duties and taxes for P.volve Gliders.</p>
                </div>
                
                <div :style="'border-left: 10px solid ' + pvolveSalmon + '; padding: 1rem 3rem 1rem 2rem;'">
                    <h4 class="thinHeader" :style="'margin-top: 0; letter-spacing: -1px; line-height: 2rem; color: ' + pvolveSalmon + ';'">"... after just a few weeks of training, <span class="thickHeader">butts begin to lift, biceps take form, and abdomen grooves appear"</span></h4>
                    <img src="https://f3r6v6t8.ssl.hwcdn.net/static/clients/mypvolve/ELLE_Magazine_Logo.svg" style="width: 7rem;" />
                </div>
                
            </div>
    
            <div class="col-sm-12 col-md-6 relative-position" style="padding: 1rem;"> <!--left block -->
                <q-inner-loading :visible="!currentProductToAddToGiftBox" />
                
                <div v-if="!giftAdded && currentProductToAddToGiftBox" style="padding: .5rem;">
                    <!--<div align="center">-->
                    <!--    <q-icon name="fa-gift" color="orange" style="font-size: 2rem;" />-->
                    <!--</div>-->
                    <giftEdit :currentGiftBox="currentGiftBox" :currentGiftBoxProducts="currentGiftBoxProducts" :currentProductToAddToGiftBox="currentProductToAddToGiftBox" :singleGiftItem="singleGiftItem" :notEditable="notEditable" :inlineForm="inlineForm" :saveTheBox="saveTheBox" @closeEditGiftBox="saveMothersDayGift" />
                </div>
                
                <div v-if="giftAdded">
                    <div class="row" style="padding: .5rem;">
                        
                        <div class="col-5 row justify-center">
                            <div v-for="(product, index) in currentGiftBoxProducts" :class="singleGiftItem ? '' : 'col-xs-6 col-sm-4 col-md-3 col-lg-2'" align="center">
                                <q-card class="bg-white" style="position: relative; height: calc(100% - 1rem); max-width: 10rem;">
                                    <q-card-main style="padding: 0;">
                                        <img class="full-width" :src="'https://f3r6v6t8.ssl.hwcdn.net/static/previews/' + product.productSKU + '/' + product.productSKU + '_image_cover.png'" />
                                        <p style="font-size: 0.8rem; line-height: 1rem; padding: .5rem;">{{product.productName}}</p>
                                    </q-card-main>
                                </q-card>
                            </div>
                            
                            <div class="col-12" style="padding: .5rem 0;" align="center">
                                <q-icon name="fa-check" color="green" /> SAVED  
                            </div>
                            
                            <div class="col-12" style="padding: .5rem 0;" align="center">
                                <q-btn @click="removeMothersDayGift()" size="sm" :style="'background: ' + pvolveMintTitle + '; color: #fff;'">
                                    <q-icon name="fa-pencil-alt" />
                                    Edit Gift
                                </q-btn>
                            </div>
                        </div>
                        
                        <div class="col-7 row">
                            
                            <div class="col-xs-12" style="padding: .5rem;">
                                <h6 style="font-size: .8rem;">To:</h6>
                                <p style="margin: 0;">{{currentGiftBox.recipientName}}</p>
                            </div>
                            <div class="col-xs-12" style="padding: .5rem;">
                                <h6 style="font-size: .8rem;">Email:</h6>
                                <p style="margin: 0;">{{currentGiftBox.recipientEmail}}</p>
                            </div>
                            <div class="col-xs-12" style="padding: .5rem;">
                                <h6 style="font-size: .8rem;">Your Name:</h6>
                                <p style="margin: 0;">{{currentGiftBox.giftGiverFrom}}</p>
                            </div>
                            <div class="col-xs-12" style="padding: .5rem;">
                                <h6 style="font-size: .8rem;">When:</h6>
                                <p style="margin: 0;">{{moment(currentGiftBox.sendWhen).format('M/DD/YY')}}</p>
                            </div>
                            <div class="col-xs-12" style="padding: .5rem;">
                                <h6 style="font-size: .8rem;">Message:</h6>
                                <p style="margin: 0;">{{currentGiftBox.giftMessage}}</p>
                            </div>
                                
                        </div>
                        
                    </div>

                    <hr style="margin: 2rem 0;" /> 
                    
                    <h6 align="center" style="margin: 1rem;">Enter your information:</h6>
                    <signUpOfferOld 
                        :giftCheckout="giftCheckout" 
                        :offerProductID="localOfferProductID" 
                        :productIDsToCheck="environmentJSON.e.validSubscriptionProductIDs" 
                        :completeSignUpComponentData="completeSignUpComponentData" 
                        :buttonColor="pvolveSalmon" 
                        :signUpBackgroundColor="'#FFF1F0'" 
                        :subscribeRoute="subscribeRoute" 
                        subscribeLabel="Yes, I would like to receive news, updates and exclusive tips from P." 
                        @userHasAccess="route('/library')"
                    />
                </div>
                
            </div>
    
        </div>

    </div>
      
</template>

<script>
    import signUpOfferOld from '../../common/showcase/signUpOfferOld.vue'
    import giftEdit from '../../common/shop/giftEdit.vue'
    import pvolveFooter from './pvolveFooter.vue'
    
    import { designTools } from '../../../mixins/designTools'
    import { pvolveColors } from './pvolveColors'
    import { impactTools } from './impactTools'
    
    export default {
        props: ['componentData'],
        
        components: {
            signUpOfferOld,
            pvolveFooter,
            giftEdit
        },

        data() {
            return {
                giftAdded: false,
                saveTheBox: false,
                footerData: '',

                localOfferProductID: 149461,
                subscribeRoute: 'api/client/mypvolve/subscribeUser2MailingList',
                
                completeSignUpComponentData: {
                    header: 'Step 2: Payment information',
                    componentName: 'CreditCardForm',
                    showFirstAndLastNameFields: true,
                    firstName: '',
                    lastName: '',
                    submitButtonLabel: 'Submit'
                },
                
                heroUnitComponentData: {
                    backgroundImageURL: 'mypvolve/PLV003-17-PP_Bannerimages_Short_SignUp.jpg',
                    padding: '3rem',
                    textColor: '#fff',
                    heroTitle: "<h1 class='thickHeader' style='margin: 0; letter-spacing: .01rem;'>give the gift of feeling good!</h1>"
                },
                
                currentGiftBox: {
                    recipientName: '',
                    recipientEmail: '',
                    sendWhen: new Date(),
                    giftMessage: '',
                    giftGiverFrom: ''
                },
                
                giftCheckout: true,
                currentGiftBoxProducts: '',
                currentProductToAddToGiftBox: '',
                singleGiftItem: true,
                notEditable: true,
                inlineForm: true
            }
        },
        
        mixins: [pvolveColors, designTools, impactTools],

        computed: {
            environmentJSON() {
                return this.$root.$store.state.environment.json
            },
            
            windowWidth() {
                return this.$root.$store.state.windowWidth
            },
            
            userInfo() {
                return this.$root.$store.state.user.info
            },
            
            offerProductID() {
                return this.$root.$store.state.offerProductID
            },
            
            environmentProducts() {
                return this.$root.$store.state.environmentProducts
            },
        },

        methods: {
            saveMothersDayGift() {
                k('currentGiftBox: ', this.currentGiftBox)
                
                this.localStorage.set('mothersdayCurrentGiftBox', this.currentGiftBox)
                this.giftAdded = true
            },
            
            removeMothersDayGift() {
                this.$store.commit('clearCart')
                this.localStorage.set('mothersdayCurrentGiftBox', '')
                this.saveTheBox = false
                this.giftAdded = false
            },
            
            initPurchaseSuccessHandler() {
                this.$root.$off('purchaseSuccess')
                
                this.$root.$on('purchaseSuccess', (res) => {
                    k('subway purchase success!')
                    
                    this.localStorage.set('mothersdayCurrentGiftBox', '')
                    
                    this.trackImpactSale()
                    
                    this.$root.$off('purchaseSuccess')
                })
            }
        },
        
        watch: {
            environmentJSON() {
                k('environmentJSON watch: ', this.environmentJSON)
                this.footerData = this.$root.homePageSectionFromID('footer')
                k('footerData watch: ', this.$root.homePageSectionFromID('footer'))
            },
            
            environmentProducts() {
                this.currentProductToAddToGiftBox = this.environmentProducts.filter((product) => {
                    return product.productID === this.localOfferProductID
                })[0]
                this.currentGiftBoxProducts = [this.currentProductToAddToGiftBox]
            }
        },
        
        mounted() {
            k('offerProductID: ', this.offerProductID)
            
            this.$store.commit('clearCart')
            
            if (this.localStorage.get('mothersdayCurrentGiftBox')) {
                this.currentGiftBox = this.localStorage.get('mothersdayCurrentGiftBox')
                // this.giftAdded = true
                this.saveTheBox = true
            }
            
            if (this.environmentProducts) {
                this.currentProductToAddToGiftBox = this.environmentProducts.filter((product) => {
                    return product.productID === this.localOfferProductID
                })[0]
                this.currentGiftBoxProducts = [this.currentProductToAddToGiftBox]
            }
            
            this.initPurchaseSuccessHandler()
        }
    }
</script>

<style>
    .smallHead {
        font-family: 'Montserrat', 'sans-serif';
        font-size: 1.2rem;
        margin: 0;
    }
    .headerBkgd {
        background: url('https://f3r6v6t8.ssl.hwcdn.net/static/clients/mypvolve/sign-up-now-header-fpo.jpg') no-repeat center center;
        background-position: top;
        -webkit-background-size: contain;
        -moz-background-size: contain;
        -o-background-size: contain;
        background-size: 100vw auto;
        max-width: 100%;
      }
</style>